import{v as i,O as ne,T as oe,l as w,W as ie,A as v,I as re,Q as le,d as ce,M as de,D as he,a as ue,b as me,c as ge,e as pe,B as S,y as f,f as fe,o as B,g as P,s as ye,h as be,i as y,r as we,j as xe,Z as j,P as Me,k as H,m as Ee,n as ve,p as k,C as Se,q as J,t as Te,u as I,w as $,x as F,z as T,E as C,F as O,G as _e,H as De,U as Ae,L as ke,S as Ie,J as W,K as _,N as U,R as D,V,X as R,Y as Ce,_ as Oe,$ as q,a0 as ze,a1 as Ne,a2 as Le,a3 as Be,a4 as Pe,a5 as X,a6 as je,a7 as He,a8 as Je}from"./vendor.20b1e5fd.js";const $e=function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))n(s);new MutationObserver(s=>{for(const o of s)if(o.type==="childList")for(const r of o.addedNodes)r.tagName==="LINK"&&r.rel==="modulepreload"&&n(r)}).observe(document,{childList:!0,subtree:!0});function t(s){const o={};return s.integrity&&(o.integrity=s.integrity),s.referrerpolicy&&(o.referrerPolicy=s.referrerpolicy),s.crossorigin==="use-credentials"?o.credentials="include":s.crossorigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function n(s){if(s.ep)return;s.ep=!0;const o=t(s);fetch(s.href,o)}};$e();const Fe=[{name:"nocache",displayName:"Disable caching",type:"boolean",default:!1},{name:"hide_auto_help",displayName:"Hide automatic help",type:"boolean",default:!1}],We=()=>i(ne,{options:Fe}),Ue=({url:a})=>{const[e]=oe("options"),t=e&&e.hide_auto_help,[n,s]=w(ie()?!1:!t),o=v(()=>{s(!n)},[n]);return a=a||`${window.location.origin}${window.location.pathname}README.md`,i(ce,null,i(re,{verticalAlign:"top","aria-label":"Help",icon:i(le,null),size:"lg",onClick:o,mr:"4"}),i(Ve,{url:a,isOpen:n,setOpen:s}))},Ve=({isOpen:a,setOpen:e,url:t})=>{const n=v(()=>{e(!a)},[e,a]),s=v(()=>{e(!1)},[e]),o=`https://markdown.mtfm.io/#?url=${t}`;return i(ge,{size:"full",placement:"top",onClose:n,isOpen:a,onOverlayClick:s},i(de,null,i(he,null,i(ue,{size:"lg",colorScheme:"blue.500",bg:"gray.100"}),i(me,null,i("iframe",{width:"100%",height:"100%",src:o})))))},g=pe(a=>({messages:[],modelCount:-1,model:void 0,trainingDataSet:void 0,predictionInput:void 0,predictionOutput:void 0,currentlyTrainingDataHash:null,clearMessages:()=>a(e=>({messages:[]})),addMessage:e=>a(t=>({messages:t.messages.concat([e])})),setMessages:e=>a(t=>({messages:e})),setTrainingDataSet:e=>a(t=>({trainingDataSet:e})),updateModels:async()=>{const e=await Re();a(t=>({modelCount:e}))},deleteModels:async()=>{await qe(),a(e=>({modelCount:0}))},setModel:async e=>{a(t=>({model:e}))},setPredictionInput:async e=>{a(t=>({predictionInput:e}))},setPredictionOutput:async e=>{a(t=>({predictionOutput:e}))}})),Re=async()=>{const a=await S.listModels();return Object.keys(a).length},qe=async()=>{const a=await S.listModels(),e=Object.keys(a).map(t=>S.removeModel(t));try{await Promise.all(e)}catch(t){console.error(t)}},Xe=()=>{const a=g(s=>s.modelCount),e=g(s=>s.updateModels),t=g(s=>s.deleteModels),n=v(async()=>{t()},[t]);return f(()=>{(async()=>{await e()})()},[e]),i(fe,{isDisabled:a<=0,onClick:n},"Clear cache (",a>0?a:0," models)")},Z=a=>{const e={};return Object.keys(a).forEach(t=>{a[t]&&(e[t]=new Float32Array(Ze(a[t])))}),e},G=a=>(console.log("predictionDecode",a),{requestId:a.requestId,series:Z(a.series)}),Y="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",E=new Uint8Array(256);for(var A=0;A<Y.length;A++)E[Y.charCodeAt(A)]=A;function Ze(a){if(!a)throw new Error("base64decode string argument given");let e=a.length*.75,t=a.length,n,s=0,o,r,l,c;a[a.length-1]==="="&&(e--,a[a.length-2]==="="&&e--);var d=new ArrayBuffer(e),h=new Uint8Array(d);for(n=0;n<t;n+=4)o=E[a.charCodeAt(n)],r=E[a.charCodeAt(n+1)],l=E[a.charCodeAt(n+2)],c=E[a.charCodeAt(n+3)],h[s++]=o<<2|r>>4,h[s++]=(r&15)<<4|l>>2,h[s++]=(l&3)<<6|c&63;return d}/**
 * @license
 * Private wand license.
 * Currently very specific to gestures, need to loosen that up
 */const Ge=.7;class K{trainingDataJson;data={};ranges={};_labels=[];_streams=[];shuffledTrainIndex=0;shuffledTestIndex=0;trainingIndices=new Uint32Array;testingIndices=new Uint32Array;bigFatDataArray=new Float32Array;bigFatLabelArray=new Uint8Array;_timesteps=0;constructor(e){this.trainingDataJson=e}hash(){if(!this.trainingDataJson)throw"No trainingDataJson to hash";return B(this.trainingDataJson)}nextTrainBatch(e){return this.nextBatch(e,this.trainingIndices)}nextTestBatch(e){return this.nextBatch(e,this.testingIndices)}nextBatch(e,t){const n=new Float32Array(e*this.imageSize),s=new Uint8Array(e*this.numClasses);console.assert(this.numClasses>0);for(let l=0;l<e;l++){const c=t[l%t.length],d=c*this.imageSize,h=this.bigFatDataArray.slice(d,d+this.imageSize);n.set(h,l*this.imageSize);const m=c*this.numClasses,u=this.bigFatLabelArray.slice(m,m+this.numClasses);s.set(u,l*this.numClasses)}const o=P(n,[e,this.imageSize]),r=P(s,[e,this.numClasses]);return{xs:o,labels:r}}get classNames(){return this._labels}get gestureNames(){return this.classNames}get numClasses(){return this._labels.length}get imageWidth(){return this._streams.length}get width(){return this.imageWidth}get imageHeight(){return this.timeSteps}get height(){return this.imageHeight}get imageSize(){return this.imageWidth*this.imageHeight}get timeSteps(){return this._timesteps}get trainingExampleCount(){return this.trainingIndices.length}get testingExampleCount(){return this.testingIndices.length}allNonTimeValues(e){this.allNonTimeSensorStreams((t,n,s,o)=>{t.forEach((r,l)=>{e(r,l,t,n,s,o)})})}allSensorStreams(e){Object.keys(this.data).forEach(t=>{this.data[t].forEach((s,o)=>{const r=s.data;this._streams.forEach(l=>{r[l]||console.error(`sensorName=${l} gestureName=${t}`),e(r[l],l,o,t)})})})}allNonTimeSensorStreams(e){Object.keys(this.data).forEach(t=>{this.data[t].forEach((s,o)=>{const r=s.data;this._streams.forEach(l=>{l.endsWith("t")||e(r[l],l,o,t)})})})}allExamples(e){Object.keys(this.data).forEach(t=>{this.data[t].forEach((s,o)=>{const r=s.data;e(r,o,t)})})}allExamplesForLabel(e){return this.data[e]}getMaxValue(){let e=0;const t=n=>{e=Math.max(Math.abs(n),e)};return this.allNonTimeValues(t),e}normalize(){console.log("    normalizing...");const e=this._streams.filter(t=>!t.endsWith("t"));e.forEach(t=>this.ranges[t]={min:Number.MAX_VALUE,max:Number.MIN_VALUE,absmax:Number.MIN_VALUE}),this.allNonTimeSensorStreams((t,n,s,o)=>{t.forEach(r=>{this.ranges[n].min=Math.min(this.ranges[n].min,r),this.ranges[n].max=Math.max(this.ranges[n].max,r)})}),e.forEach(t=>this.ranges[t].absmax=Math.max(this.ranges[t].max,Math.abs(this.ranges[t].min))),this.allNonTimeSensorStreams((t,n,s,o)=>{const r=this.ranges[n].absmax;t.forEach((l,c)=>{t[c]=t[c]/r})}),console.log(`        this.ranges=${JSON.stringify(this.ranges)}`)}zeroTime(){console.log("    zeroing time..."),this.allExamples(e=>{const t=this._streams.filter(s=>s.endsWith("t"));let n=Number.MAX_VALUE;t.forEach(s=>{e[s].forEach((o,r)=>n=Math.min(n,o))}),t.forEach(s=>{e[s].forEach((o,r)=>{e[s][r]=o-n})})})}trimToLongestNonZeroGesture(){console.log("    getting longest non-default gesture...");let e=0,t=0;const n=this._streams.filter(s=>!s.endsWith("t"));this.allExamples((s,o,r)=>{if(!this.trainingDataJson.controlLabels||!this.trainingDataJson.controlLabels.includes(r)){if(!s[this._streams[0]])return;let l=s[this._streams[0]].length-1;for(;l>=0&&!(n.filter(c=>s[c][l]!=0).length>0);l--);e=Math.max(e,l+1)}t=Math.max(t,s[this._streams[0]].length)}),console.log(`        [max=${e}] [maxAll=${t}]...trimming...`),this.allExamples((s,o,r)=>{this._streams.forEach(l=>{!s[l]||(s[l]=s[l].slice(0,e))})}),t=0,this.allSensorStreams(s=>{t=Math.max(t,s.length)}),console.log(`        all arrays now [max=${t}]`)}extend(){console.log("    extending...");let e=0;const t=[];this.allSensorStreams(n=>{e=Math.max(e,n.length),n.forEach((s,o)=>{o!=0&&t.push(s-n[o-1])})}),this._timesteps=e,console.log(`        this.timeSteps=${this.timeSteps}`)}processPrediction(e){if(!e)throw"processExample: missing example";if(this._timesteps===0)throw"processPrediction but this._timesteps === 0";Object.keys(e).forEach(s=>{if(e[s].length>this._timesteps&&(e[s]=e[s].slice(0,this._timesteps)),e[s].length<this._timesteps){const o=new Float32Array(this._timesteps);o.set(e[s]),e[s]=o}}),Object.keys(e).forEach(s=>{const o=this.ranges[s].absmax;e[s].forEach((r,l,c)=>{c[l]=r/o})});const t=new Float32Array(1*this.imageSize);let n=0;return this._streams.forEach(s=>{const o=n*this.timeSteps;t.set(e[s],o),n++}),t}async load(){console.log(`Begin loading examples from ${this.trainingDataJson.examples.length} gestures and converting to float arrays...`),this.data={};const e=this.data;this._streams=[];const t={};console.log(this?.trainingDataJson?.examples[0]),this.trainingDataJson.examples.forEach(c=>{const d=c.label;e[d]||(e[d]=[]);const h=Z(c.data.series);Object.keys(h).forEach(u=>t[u]=!0);const m={data:h,url:c.name||c.url};e[d].push(m)}),this._streams=Object.keys(t),this._streams.sort(),this._labels=Object.keys(this.data),this._labels.sort(),console.log(`labels: [  ${this._labels.join("  |  ")}  ]`),console.log(`streams: [  ${this._streams.join("  |  ")}  ]`),console.log("    done loading raw gesture data, begin preprocessing..."),this.trimToLongestNonZeroGesture(),this.normalize();const n=this.getMaxValue();if(console.log(`        normalizedMax=${n}`),n!=1)throw"Failed to normalize";this.zeroTime(),this.extend(),console.log("    converting to large combined float arrays...");const s=Object.keys(this.data).reduce((c,d)=>c+this.data[d].length,0);this.bigFatDataArray=new Float32Array(s*this.imageSize),this.bigFatLabelArray=new Uint8Array(s*this.numClasses),console.log(`        totalExampleCount=${s} imageSize=${this.imageSize} numClasses=${this.numClasses}`),console.log(`            width=${this.width} height=${this.height}`);let o=0;this.classNames.forEach((c,d)=>{this.data[c].forEach(m=>{this.bigFatLabelArray[o*this.numClasses+d]=1;const u=m.data;let b=0;this._streams.forEach(p=>{const z=o*this.imageSize+b*this.timeSteps;this.bigFatDataArray.set(u[p],z),b++}),o++})});const r=ye.createShuffledIndices(s),l=Math.floor(Ge*s);this.trainingIndices=r.slice(0,l),this.testingIndices=r.slice(l)}}/**
 * @license
 * Private wand license.
 */const Ye=32,Ke=10;class Qe{_data;_model;classNames=[];constructor(e){this._data=e,this.createModel()}get model(){return this._model}createModel(){const e=this._data;this.classNames=e.classNames,this._model=be(),this._model.add(y.conv1d({filters:100,kernelSize:7,strides:1,activation:"relu",kernelInitializer:"varianceScaling",inputShape:[e.height,e.width]})),this._model.add(y.conv1d({filters:100,kernelSize:7,strides:1,activation:"relu"})),this._model.add(y.conv1d({filters:100,kernelSize:7,strides:1,activation:"relu"})),this._model.add(y.maxPooling1d({poolSize:3})),this._model.add(y.conv1d({filters:100,kernelSize:7,strides:1,activation:"relu"})),this._model.add(y.globalAveragePooling1d()),this._model.add(y.dropout({rate:.5})),y.flatten(),this._model.add(y.dense({units:e.classNames.length,activation:"softmax"})),this._model.summary();const t=we.adam();return this._model.compile({optimizer:t,loss:"categoricalCrossentropy",metrics:["accuracy"]}),this._model}async train(){const e=this._data,t=["loss","val_loss","acc","val_acc"],n=document.getElementById("Training"),s=xe.show.fitCallbacks(n,t),o=e.trainingExampleCount*2,[r,l]=j(()=>{const u=e.nextTrainBatch(o);return[u.xs.reshape([o,e.imageHeight,e.imageWidth]),u.labels]}),c=e.testingExampleCount*2,[d,h]=j(()=>{const u=e.nextTestBatch(c);return[u.xs.reshape([c,e.imageHeight,e.imageWidth]),u.labels]}),m=await this.model.fit(r,l,{batchSize:Ye,validationData:[d,h],epochs:Ke,shuffle:!0,callbacks:s});return this.model,m}}const Q=async a=>{if(a.type!=="PersistedModel.v1")throw`modelToJson expecting PersistedModel.v1 but got ${a.type}`;const e=new ee;if(await a.model.save(e),!e.modelEncoded)throw"JsonIOHandler did not provide .modelEncoded";return{type:"PersistedModelJson.v1",model:e.modelEncoded,meta:a.meta}},et=async a=>{if(a.type!=="PersistedModelJson.v1")throw`\u{1F530} modelToJson expecting PersistedModelJson.v1 but got ${a.type}`;const e=new ee(a.model),t=await H(e);return{type:"PersistedModel.v1",model:t,meta:a.meta}};class ee{model;modelEncoded;constructor(e){this.modelEncoded=e}async save(e){if(!e.modelTopology)throw"no modelArtifact.modelTopology";if(!e.weightData)throw"no modelArtifacts.weightData";const t=[{paths:["./model.weights.bin"],weights:e.weightSpecs||[]}],n={modelTopology:e.modelTopology,format:e.format,generatedBy:e.generatedBy,convertedBy:e.convertedBy,userDefinedMetadata:e.userDefinedMetadata,weightsManifest:t};return this.modelEncoded={modelTopologyAndWeightManifest:n,weightData:Ee(e.weightData)},{modelArtifactsInfo:{dateSaved:new Date,modelTopologyType:"JSON",modelTopologyBytes:e.modelTopology.byteLength,weightDataBytes:e.weightData.byteLength}}}async load(){if(!this.modelEncoded)throw"Missing constructor argument";const e=this.modelEncoded.modelTopologyAndWeightManifest,t=e.modelTopology,n=e.weightsManifest,s=e.generatedBy,o=e.convertedBy,r=e.format,l=e.userDefinedMetadata;if(t==null&&n==null)throw new Error("The JSON contains neither model topology or manifest for weights.");let c=this.modelEncoded.modelTopologyAndWeightManifest.weightsManifest[0].weights;const d=ve(this.modelEncoded.weightData);return{modelTopology:t,weightSpecs:c,weightData:d,userDefinedMetadata:l,generatedBy:s,convertedBy:o,format:r}}}const te=(a,e)=>{if(!a)return[void 0,new Error("Asked to predict sample but no model loaded")];if(!e)return[void 0,new Error("Asked to predict but no input")];if(!e.series)return[void 0,new Error("Asked to predict but input lacks 'series' field")];const t=e.series,n=tt(a,t),s=Me(n,[1,a.meta.prediction.imageHeight,a.meta.prediction.imageWidth]),o=a.model.predictOnBatch(s).dataSync();let r=0,l="",c;const d={};return a.meta.prediction.classNames.forEach((m,u)=>{d[m]=o[u],o[u]>r&&(r=o[u],l=m)}),l!=="_"&&d[l]<.45&&d._&&(c=`${l} -> _ because score < 0.45`,l="_"),[{prediction:l,predictions:d,requestId:e.requestId,modelHash:a.meta.training.hash,note:c},void 0]},tt=(a,e)=>{if(!e)throw"processExample: missing example";if(!a)throw"processExample: missing model";Object.keys(e).forEach(o=>{o.endsWith("t")&&delete e[o]});const t=Object.keys(e);t.sort();const n=Math.max(a.meta.prediction.imageHeight,a.meta.prediction.imageWidth);t.forEach(o=>{if(e?.[o]?.length>n&&(e[o]=e[o].slice(0,n)),e?.[o]?.length<n){const r=new Float32Array(n);r.set(e[o]),e[o]=r}}),t.forEach(o=>{e[o].forEach((r,l,c)=>{c[l]=r/a.meta.training.ranges[o].absmax})});const s=new Float32Array(1*a.meta.prediction.imageWidth*a.meta.prediction.imageHeight);return t.forEach((o,r)=>{const l=r*n;s.set(e[o],l)}),s},st=async(a,e)=>{const t=await Q(a),n=JSON.stringify(t),s=JSON.parse(n),o=await et(s),r=te(o,G(e.examples[0].data));return console.log("prediction",r),console.log("trainingDataSet.examples[0]",e.examples[0]),!0},at=()=>{const a=k(),[e]=Se("nocache"),[t,n]=w(void 0),[s,o]=w(""),r=g(h=>h.setModel),l=g(h=>h.model);f(()=>{},[n]),f(()=>a.metaframe?a.metaframe.onInput("training",m=>{if(m&&m!==n){const u=B(m);u!==s&&(o(u),n(m))}}):void 0,[a.metaframe,s,o,n]);const c=g(h=>h.updateModels),d=g(h=>h.setMessages);return f(()=>{if(!t||!t.examples||t.examples.length===0||!a?.metaframe)return;const h={message:"Training",type:"info"},m=Object.keys(t.examples.reduce((b,p)=>(b[p.label]=!0,b),{}));if(m.length<2){const b={message:`Not enough data labels: [${m.join(", ")}]`,type:"warning"};d([h,b]);return}let u=!1;return(async()=>{d([h,{message:"loading data...",type:"info"}]);const p=new K(t);if(await p.load(),u)return;d([h,{message:"\u2705 loaded data",type:"info"}]);const x=p.hash(),N={prediction:{classNames:p.classNames,imageHeight:p.imageHeight,imageWidth:p.imageWidth},training:{date:new Date,hash:x,ranges:p.ranges}};let M;if(!e){const se=await S.listModels();if(u)return;if(se[`indexeddb://${x}`]){const ae=await H(`indexeddb://${x}`);if(u)return;M={type:"PersistedModel.v1",model:ae,meta:N},d([h,{message:`Model ready (cached) ${x.substring(0,10)}`,type:"success"}]),r(M);return}}d([h,{message:"training...",type:"warning"}]);const L=new Qe(p);await L.train(),!u&&(d([h,{message:"\u2705 Trained",type:"warning"}]),M={type:"PersistedModel.v1",model:L.model,meta:N},e||(await M.model.save(`indexeddb://${x}`),c()),r(M),d([h,{message:`\u2705 Model ready ${x.substring(0,10)}`,type:"success"}]))})(),()=>{u=!0}},[t,e,r,a?.metaframe]),f(()=>{if(!l||!a?.metaframe?.setOutputs||!t)return;let h=!1;return(async()=>{if(await st(l,t),h)return;const m=await Q(l);h||a.metaframe.setOutputs({model:m})})(),()=>{h=!0}},[l,t,a.metaframe]),i("div",null,i(Xe,null),i("div",{id:"Training"}))},nt=()=>{const a=k(),e=g(c=>c.model),[t,n]=w(void 0),[s,o]=w(void 0),[r,l]=w(void 0);return f(()=>{console.log("metaframeObject.inputs",a.inputs)},[a.inputs]),f(()=>{const c=a?.inputs?.prediction;if(c&&c!==t){n(c);const d=G(c);o(d)}},[a.inputs,t,n,o]),f(()=>{if(!s||!e||!a?.setOutputs)return;const[c,d]=te(e,s);a.setOutputs({prediction:c,error:d?.message}),l(c)},[s,e,l,a.setOutputs]),i("div",null,i(C,{status:r?.prediction?"success":"info"},i(O,null),r?r.prediction:"...waiting for data"),r?.note?i(C,{status:"warning"},i(O,null),r?.note):null,i(J,{variant:"simple"},i(Te,null,i(I,null,i($,null,"Label"),i($,null,"Score"))),i(F,null,r?Object.keys(r.predictions).sort(c=>r.predictions[c]).map(c=>i(I,null,i(T,null,c),i(T,{isNumeric:!0},r.predictions[c]))):null)))},ot=()=>{const a=g(e=>e.messages);return i(Ie,{spacing:3},a.map((e,t)=>i(C,{key:t,status:e.type?e.type:"info"},i(_e,{mr:2},e.message),i(O,null),i(De,null,i(Ae,null,e.messages?e.messages.map((n,s)=>i(ke,{key:s},n)):null)))))};var mt='.uplot, .uplot *, .uplot *::before, .uplot *::after {box-sizing: border-box;}.uplot {font-family: system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial, "Noto Sans", sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol", "Noto Color Emoji";line-height: 1.5;width: min-content;}.u-title {text-align: center;font-size: 18px;font-weight: bold;}.u-wrap {position: relative;user-select: none;}.u-over, .u-under {position: absolute;}.u-under {overflow: hidden;}.uplot canvas {display: block;position: relative;width: 100%;height: 100%;}.u-legend {font-size: 14px;margin: auto;text-align: center;}.u-inline {display: block;}.u-inline * {display: inline-block;}.u-inline tr {margin-right: 16px;}.u-legend th {font-weight: 600;}.u-legend th > * {vertical-align: middle;display: inline-block;}.u-legend .u-marker {width: 1em;height: 1em;margin-right: 4px;background-clip: padding-box !important;}.u-inline.u-live th::after {content: ":";vertical-align: middle;}.u-inline:not(.u-live) .u-value {display: none;}.u-series > * {padding: 4px;}.u-series th {cursor: pointer;}.u-legend .u-off > * {opacity: 0.3;}.u-select {background: rgba(0,0,0,0.07);position: absolute;pointer-events: none;}.u-cursor-x, .u-cursor-y {position: absolute;left: 0;top: 0;pointer-events: none;will-change: transform;z-index: 100;}.u-hz .u-cursor-x, .u-vt .u-cursor-y {height: 100%;border-right: 1px dashed #607D8B;}.u-hz .u-cursor-y, .u-vt .u-cursor-x {width: 100%;border-bottom: 1px dashed #607D8B;}.u-cursor-pt {position: absolute;top: 0;left: 0;border-radius: 50%;border: 0 solid;pointer-events: none;will-change: transform;z-index: 100;/*this has to be !important since we set inline "background" shorthand */background-clip: padding-box !important;}.u-select.u-off, .u-cursor-x.u-off, .u-cursor-y.u-off, .u-cursor-pt.u-off {display: none;}';const it=({example:a})=>{const e=Object.keys(a.data);return[Array.from(Array(a.data[e[0]].length).keys()),...e.map(t=>Array.from(a.data[t]))],i("div",null)},rt=()=>{const a=g(n=>n.trainingDataSet),[e,t]=w();return f(()=>{if(!a)return;let n=!1;return(async()=>{const s=new K(a);await s.load(),!n&&t(s)})(),()=>{n=!0}},[a]),f(()=>{},[e]),i(V,{isLazy:!0,orientation:"horizontal"},i(U,null,e?e._labels.map((n,s)=>i(D,{key:s},n)):[]),i(W,null,e?e._labels.map((n,s)=>i(_,{p:4,key:s},i(lt,{label:n,trainingData:e}))):[]))},lt=({label:a,trainingData:e})=>{const t=e.allExamplesForLabel(a);return t[0]&&Object.keys(t[0].data).sort(),i("div",null,i(R,{size:"small"},"Total: ",t.length),i(J,{variant:"simple"},i(F,null,t.map((n,s)=>i(I,{key:s},i(T,null,n.url),i(T,null,i(it,{example:n})))))))},ct=()=>{const a=Ce(["red.50","teal.50","blue.50"],["red.900","teal.900","blue.900"]),[e,t]=Oe("tab",0),n=a[e];return i(Be,{columns:1,spacing:10},i(q,null,i(R,{size:"md"},i(ze,{href:"https://www.tensorflow.org/js",isExternal:!0,mr:"2"},i(Ne,null)," Tensorflow 1D"),"convolutional neural net trainer/predictor"),i(Le,null),i(Ue,null),i(We,null)),i(q,null,i(ot,null)),i(Pe,null,i(V,{isLazy:!0,isFitted:!0,onChange:t,bg:n},i(U,null,i(D,null,"Train"),i(D,null,"Predict"),i(D,null,"View training data")),i(W,{p:"1rem"},i(_,null,i(at,null)),i(_,null,i(nt,null)),i(_,null,i(rt,null))))))},dt=()=>i("div",null,i(ct,null)),ht=()=>{const a=k(),e=g(n=>n.setTrainingDataSet),t=g(n=>n.setPredictionInput);return f(()=>{if(!a.metaframe)return;const n=[];return n.push(a.metaframe.onInput("training",s=>{s&&e(s)})),n.push(a.metaframe.onInput("prediction",s=>{s&&t(s)})),()=>{for(;n.length>0;)n.pop()()}},[a.metaframe,e]),i(dt,null)};X.config({driver:X.INDEXEDDB,name:"metaframe-predictor",version:1,storeName:"models",description:"Stores tensorflow models locally"}),je(i(Je,null,i(He,null,i(ht,null))),document.getElementById("root"));
//# sourceMappingURL=index.27991861.js.map
